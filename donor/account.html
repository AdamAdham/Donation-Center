<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account</title>
<link rel="stylesheet" type="text/css" href="../input.css" />
<link rel="stylesheet" type="text/css" href="../style.css" />
<link rel="stylesheet" type="text/css" href="../map.css" />
<link rel="stylesheet" type="text/css" href="../uploaddocument.css" />
<script type="module" src="../map.js"></script>
</head>
<body>
  <nav>
    <div id="nav-bar">
        <div id="left">
            <img class="logo" src="../images/logo.svg" alt="logo">
        </div>
        <div id="right">
            <ul>
                <li><a href="donorDashboard.html">Dashboard</a></li>
                <li><a href="mailto:chelSEa@example.com">Contact Us</a></li>
                <li><a href="account.html">Account</a></li>  
                <div class="notification-image flex-center" onclick="window.location.href = 'notifications.html'"><img src="../images/notification.png" alt="">  </div>
            </ul>
        </div>
    </div>
</nav>
<div id="input-container" class="register-input-container">
  <div id="details-container">        
    <div id="donor-registration" class="register-container">
        <h2 class="line-below white">Account Information</h2>
                <div class="input-field">
                    <input type="text" required class="donor-input" class="donor-input" spellcheck="false" value="Adam">
                    <!-- CHANGE -->
                    <label>First Name</label>
                    <!-- END CHANGE -->
                </div>
      
                <div class="input-field">
                  <input type="text" required class="donor-input" spellcheck="false" value="Fayek">
                  <!-- CHANGE -->
                  <label>Last Name</label>
                  <!-- END CHANGE -->
                </div>
              
      
                <div class="input-field">
                  <input type="text" required class="donor-input" spellcheck="false" value="my@email.com">
                  <!-- CHANGE -->
                  <label>Email</label>
                  <!-- END CHANGE -->
                </div>
      
                <div class="input-field">
                  <input type="password" required class="donor-input" spellcheck="false">
                  <!-- CHANGE -->
                  <label>Old Password</label>
                  <!-- END CHANGE -->
              </div>

              <div class="input-field">
                <input type="password" required class="donor-input" spellcheck="false">
                <!-- CHANGE -->
                <label>New Password</label>
                <!-- END CHANGE -->
            </div>
  
  
              <div class="input-field">
                  <input type="text"   required class="donor-input" spellcheck="false" value="01144118686">
                  <!-- CHANGE -->
                  <label>Contact Number</label>
                  <!-- END CHANGE -->
              </div>
  
              <div class="input-field">
                  <input type="text"   required class="donor-input" spellcheck="false" value="12 merghany">
                  <!-- CHANGE -->
                  <label>Address</label>
                  <!-- END CHANGE -->
              </div>
  
              <div class="input-field">
                  <input type="text"   required class="donor-input" spellcheck="false" value="Heliopolis">
                  <!-- CHANGE -->
                  <label>Area</label>
                  <!-- END CHANGE -->
              </div>
  
          
              <div class="input-field">
                  <input type="text"   required class="donor-input" spellcheck="false" value="Cairo">
                  <!-- CHANGE -->
                  <label>Governorate</label>
                  <!-- END CHANGE -->
              </div>
  
              
             
  
  
              <!-- Radio buttons (only 1 choice) -->
                <div class="radio-container">
                  <!-- CHANGE -->
                  <!-- replace ColName5 to your column name -->
                  <!-- replace value1/2/3 to your values -->
                  <h3>Gender:</h3>
                  <ul>
                    <li>
                      <input type="radio" id="value1-option" name="gender" class="donor-input">
                      <label for="value1-option">Male</label>
                      <div class="check"></div>
                    </li>
                    
                    <li>
                      <input type="radio" id="value2-option" name="gender" class="donor-input">
                      <label for="value2-option">Female</label>
                      
                      <div class="check"></div>
                    </li>
                  </ul>
                  <!-- END CHANGE -->
                </div>

                <div class="radio-container">
                    <!-- CHANGE -->
                    <!-- replace ColName5 to your column name -->
                    <!-- replace value1/2/3 to your values -->
                    <h3>Role:</h3>
                    <ul>
                      <li>
                        <input type="radio" id="regular" name="role" onchange="changeForm('regular')" class="donor-input" checked>
                        <label for="regular" id="regular">Regular Donor</label>
                        <div class="check"></div>
                      </li>
                      
                      <li>
                        <input type="radio" id="teacher" name="role" onchange="changeForm('teacher')" class="donor-input">
                        <label for="teacher" id="next-regular">Teacher</label>
                        <div class="check"></div>
                      </li>
        
                      <li>
                        <input type="radio" id="doctor" name="role" onchange="changeForm('doctor')" class="donor-input">
                        <label for="doctor">Doctor</label>
                        <div class="check"></div>
                      </li>
                    </ul>
                    <!-- END CHANGE -->
                  </div>
                <!-- End radio buttons -->


                <!-- Clinic Form -->

                <div id="upload-file-container" class="close">
                  <h3>Upload Document for Role Verification:</h3>
                  <div class="input-field">
          
                      <input type="file" id="document-donor-upload" name="document-upload" multiple required>
                  </div>
              </div>


              <!-- Clinic Form -->
              
              <div id="clinic-form-container" class="close">

                <h3 class="line-below">Clinic Information</h3>

                <div class="input-field">
                  <input type="text"   required class="donor-input clinic-input" spellcheck="false">
                  <!-- CHANGE -->
                  <label>Speciality</label>
                  <!-- END CHANGE -->
                </div>

                <div class="input-field">
                  <input type="text"   required class="donor-input clinic-input" spellcheck="false" >
                  <!-- CHANGE -->
                  <label>Number of Pro bono</label>
                  <!-- END CHANGE -->
                </div>

                  <div class="input-field">
                    <input type="text"   required class="donor-input clinic-input" spellcheck="false">
                    <!-- CHANGE -->
                    <label>Address</label>
                    <!-- END CHANGE -->
                  </div>
    
                  <div class="input-field">
                      <input type="text"   required class="donor-input clinic-input" spellcheck="false">
                      <!-- CHANGE -->
                      <label>Area</label>
                      <!-- END CHANGE -->
                  </div>
      
              
                  <div class="input-field">
                      <input type="text"   required class="donor-input clinic-input" spellcheck="false">
                      <!-- CHANGE -->
                      <label>Governorate</label>
                      <!-- END CHANGE -->
                  </div>
                  <h3>Pin location of Clinic:</h3>
                  <div id="map"></div>
    
              </div>
          
              
              <div id="teacher-form-container" class="close">
                  <h3 class="line-below">Teacher Information</h3>
                  <div class="input-field">
                      <input type="text"   required class="donor-input teacher-input" spellcheck="false" >
                      <!-- CHANGE -->
                      <label>Subject</label>
                      <!-- END CHANGE -->
                    </div>
  
                      <div class="input-field">
                        <input type="text"   required class="donor-input teacher-input" spellcheck="false">
                        <!-- CHANGE -->
                        <label>Number of classes</label>
                        <!-- END CHANGE -->
                      </div>
        
                      <div class="input-field">
                          <input type="text"   required class="donor-input teacher-input" spellcheck="false">
                          <!-- CHANGE -->
                          <label>Number of students</label>
                          <!-- END CHANGE -->
                      </div>

              </div>
  
              <div class="button-container">
                  <button class="positive-button submit" onclick="registerDonor(event)">Update</button>   
              </div>
          </form>
      </div>

</div>
</div>
</body>
<script>
  var doctor = false
    var teacher = false
function registerDonor(){
    // Check if all text field are entered
    var inputs = document.getElementsByClassName("donor-input");
    if(doctor){
        // A doctor so remove all inputs which are about teacher
        var inputs = Array.from(inputs).filter(function(input) {
            console.log(!(input.classList.contains('clinic-input')));
            return !(input.classList.contains('teacher-input'))
        });
    }else if(teacher){
        // A teacher so remove all inputs about clinic
        var inputs = Array.from(inputs).filter(function(input) {
            console.log(!(input.classList.contains('clinic-input')));
            return !(input.classList.contains('clinic-input'))
        });
    }else{
        // Not a doctor or teacher, remove both
        var inputs = Array.from(inputs).filter(function(input) {
            console.log(!(input.classList.contains('clinic-input')));
            return !(input.classList.contains('teacher-input')) && !(input.classList.contains('clinic-input'))
        });
    }
    var allFilled = true;

    for (var i = 0; i < inputs.length; i++) {
    if (inputs[i].value === "") {
        allFilled=false
    }
}

    if(!allFilled){
      alert("Please enter all required fields")
      return
    }

    // inputs = document.querySelectorAll('input[type="password"]:(.donor-input)');
    //  allFilled = true;
    
    var allInputs = document.querySelectorAll('input[type="password"]');
    var passwords = Array.from(allInputs).filter(function(input) {
        return input.classList.contains('donor-input');
    });
    var missing = checkPasswordStrength(passwords[1].value)

    if(missing!=""){
        alert(missing)
        return
    }
   

    // Check if all radio buttons and checkboxes are selected
    var checkboxes = []
    // CHANGE
    // Change gender/6 to column names of the ones you a checkbox or radio button for
    var allInputs = document.querySelectorAll('input[name="gender"]');
    var checkbox = Array.from(allInputs).filter(function(input) {
        return input.classList.contains('donor-input');
    });
    checkboxes.push(checkbox)

    var allInputs = document.querySelectorAll('input[name="role"]');
    var checkbox = Array.from(allInputs).filter(function(input) {
        return input.classList.contains('donor-input');
    });
    checkboxes.push(checkbox)
   // checkboxes.push(document.querySelectorAll('input[name="ColName6"]'));
    // END CHANGE
    var atLeastOneChecked = false;
    console.log(checkboxes);
    for(checkboxElement of checkboxes){
      checkboxElement.forEach(function(checkbox) {
          if (checkbox.checked) {
              atLeastOneChecked = true;
          }
      });

      if (!atLeastOneChecked) {
          // At least one checkbox is checked
          // Perform your action here
          console.log(checkboxElement[0]);
          alert(`Fill out ${checkboxElement[0].name} field`);
          return;
      }
      atLeastOneChecked = false;
    }
    if(teacher||doctor){
        var fileInput = document.getElementById('document-donor-upload');
        console.log(fileInput);
        if (!fileInput.files || fileInput.files.length === 0) {
            alert("Please select a document to upload");
            return;
        }
    }
    

    alert("Your account information is updated");
    // CHANGE
    // change to desired page
    window.location.href = "donorDashboard.html";
}


function checkPasswordStrength(password) {
    var missingConditions = [];

    // Check if password length is at least 8 characters
    if (password.length < 8) {
        missingConditions.push("At least 8 characters");
    }

    // Check if password contains at least one uppercase letter
    if (!/[A-Z]/.test(password)) {
        missingConditions.push("At least one uppercase letter");
    }

    // Check if password contains at least one lowercase letter
    if (!/[a-z]/.test(password)) {
        missingConditions.push("At least one lowercase letter");
    }

    // Check if password contains at least one digit
    if (!/\d/.test(password)) {
        missingConditions.push("At least one digit");
    }

    // Check if password contains at least one special character
    if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
        missingConditions.push("At least one special character");
    }

    // Return missing conditions as a structured string or an empty string if valid
    return missingConditions.length > 0 ? "Password is missing: " + missingConditions.join(", ") : "";
}

function changeForm(role){
    const clinicCont = document.getElementById("clinic-form-container")
    const teacherCont = document.getElementById("teacher-form-container")
    const fileUplaod = document.getElementById("upload-file-container")
    if(role=="teacher"){
        doctor = false
        teacher = true
        !(clinicCont.classList.contains("close"))?clinicCont.classList.add("close"):null;
        teacherCont.classList.remove("close")  
        fileUplaod.classList.remove("close")
    }else if(role=="doctor"){
        doctor = true
        teacher = false
        !(teacherCont.classList.contains("close"))?teacherCont.classList.add("close"):null;
        clinicCont.classList.remove("close")  
        fileUplaod.classList.remove("close")
    }else if(role=="regular"){
        doctor=false
        teacher=false
        !(teacherCont.classList.contains("close"))?teacherCont.classList.add("close"):null;
        !(clinicCont.classList.contains("close"))?clinicCont.classList.add("close"):null;
        !(fileUplaod.classList.contains("close"))?fileUplaod.classList.add("close"):null;
    }
}


</script>
</html>
