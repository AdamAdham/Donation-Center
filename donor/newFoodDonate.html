<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="../input.css" />
<link rel="stylesheet" type="text/css" href="../style.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
<title>Food Donation</title>
</head>
<body>
    <nav>
        <div id="nav-bar">
            <div id="left">
                <img class="logo" src="../images/logo.svg" alt="logo">
            </div>
            <div id="right">
                <ul>
                    <li><a href="donorDashboard.html">Dashboard</a></li>
                    <li><a href="mailto:chelSEa@example.com">Contact Us</a></li>
                    <li><a href="account.html">Account</a></li>  
                    <div class="notification-image flex-center" onclick="window.location.href = 'notifications.html'"><img src="../images/notification.png" alt="">  </div>
                </ul>
            </div>
        </div>
    </nav>
    <div id="container">
        <div id="details-container">
            <h2 class="line-below white">Food Donation</h2>
            <div>
                <p><strong style="font-size: 20px;">Item Name:</strong> <span id="itemName"></span></p>
                <p class="column-name">Quantity/Amount Required: <span id="quantityAmount"></span></p>
                <div class="input-field">
                    <input type="number" id="quantityInput" min="1" required spellcheck="false">
                    <label>Quantity to donate</label>
                </div>
            </div>
            <div class="button-container">
                <button class="positive-button" onclick="donate()">Fulfill Request</button>   
            </div>
        </div>
    </div>

    <script>
        var details = JSON.parse(decodeURIComponent(window.location.search.substr(1)));
        const itemNameElement = document.getElementById("itemName")
        const quantityElement = document.getElementById("quantityAmount")
        var quantityAmount;
        if(details.colName1=="Canned Foods"){
            itemNameElement.innerText = "Beans";
            quantityElement.innerText = "20";
            quantityAmount = 20;
        }else if(details.colName1=="Fresh Meals"){
            itemNameElement.innerText = "Grilled Chicken";
            quantityElement.innerText = "10";
            quantityAmount = 10
        }else if(details.colName1=="Baked Goods"){
            itemNameElement.innerText = "Cakes";
            quantityElement.innerText = "4";
            quantityAmount = 4
        }else if(details.colName1=="Fruits and Vegetables"){
            itemNameElement.innerText = "Apples";
            quantityElement.innerText = "3";
            quantityAmount = 3
        }
        
        

        if (itemNameElement.innerText == "Apples" || itemNameElement.innerText == "Grilled Chicken") {
            quantityElement.innerText += ' KG'; // Append 'kg' for Apple and Tomato
        }
        const quantityInput = document.getElementById("quantityInput")

        function donate() {
            var quantityToDonate = parseFloat(quantityInput.value);
                var newQuantity = quantityAmount - quantityToDonate;
                if (newQuantity >= 0) {
                    quantityAmount = newQuantity;
                    quantityElement.innerText = quantityAmount;
                    if (itemNameElement.innerText == "Apples" || itemName == "Grilled Chicken") {
                        quantityElement.innerText += ' KG';
                        alert("Thank you for your donation of " + quantityToDonate + " KG " + "!");
                    } else {
                        alert("Thank you for your donation of " + quantityToDonate + "!");
                    }
                } else {
                    alert("Insufficient quantity available.");
                }
                quantityInput.value = ""
        }
    </script>
</body>
</html>
